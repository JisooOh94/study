* 소스 코드를 리팩터링하지 않고서는 테스트 코드의 품질을 크게 개선할 수 없다.
* 본장에선 리팩터링 대상이되는 코드 식별 방법 및 그 리팩토링 방법에 대해 설명한다.

# 리팩터링할 코드 식별

### 소스코드 분류 기준
* 모든 소스코드는 다음의 2가지 기준에 따라 분류될 수 있다.
* 복잡도 / 도메인 유의성
    * 복잡도 : 코드의 복잡한 정도를 나타내며 주로 클래스, 메서드 내의 분기 수로 계산한다.
    * 도메인 유의성 : 코드가 프로그램의 비즈니스 로직상에 얼마나 중요한 코드인지를 나타낸다.
* 협력자 수
    * 클래스 또는 메서드가 가지고 있는 의존객체 수를 나타낸다.
    * 의존 객체가 많을 수록, 의존 객체가 목킹하기 까다로운 유형일수록(e.g. 프로세스 외부 의존성) 테스트 코드 작성 및 유지보수 비용이 많이든다.

### 분류 기준에 따른 소스코드 분류
* 위의 2가지 분류기준에 따라 소스코드를 다음과 같이 2차원으로 분류할 수 있다.
![image](https://github.com/JisooOh94/study/assets/48702893/dcb1ad69-3745-401c-a4bf-30c5663c7851)

* 도메인 모델 및 알고리즘
    * 2사분면에 위치하는 코드 유형으로서, 복잡한 코드이거나 혹은 비즈니스 로직에 중요한 코드이면서 의존객체가 적은 코드들이 속한다.
    * 의존객체가 적으므로 테스트 개발 및 유지보수 비용이 작고, 복잡하거나 중요한 로직을 수행하므로 테스트코드를 통해 회귀방지가 크게 향상될 수 있다.
    * 따라서 이 영역에 속하는 코드들의 테스트코드를 작성하는것이 가장 효율적이다.
* 간단한 코드
    * 복잡하지도 않고 비즈니스 로직에도 중요하지 않은 코드들로서 테스트 코드 작성할 필요가 없다.
* 컨트롤러
    * 주로 비즈니스 로직 클래스와 여러 의존성간에 오케스트레이션을 수행하는 코드들이 속한다.
    * 단위 테스트에서 검증할 필요 없이 통합 테스트를 통한 검증만으로 충분하다.
* 지나치게 복잡한 코드
  * TBU