# OSI 7계층[[참고]](https://github.com/JisooOh94/study/blob/master/%EC%9D%98%EC%8B%9D%EC%9D%98%ED%9D%90%EB%A6%84/%5B%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%5D%20%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%20%EC%8A%A4%ED%83%9D.md)

![image](https://user-images.githubusercontent.com/48702893/103117063-22f91300-46ac-11eb-9065-a87e5a6fb145.png)

![image](https://user-images.githubusercontent.com/48702893/103117098-4cb23a00-46ac-11eb-994c-400728806887.png)


### 1계층. 물리계층
* 통신 케이블로 데이터를 전송하는 단계
* 데이터를 전기적인 신호(1과 0)로 변환해서 주고받는 기능만을 담당 - 에러 복구, 전송확인 등의 기능 x
* 통신케이블, 허브 등

<br>

### 2계층. 데이터 링크 계층 
* 물리계층을 통해 송수신되는 데이터의 흐름 관리 및 오류 복구 기능 담당
* MAC 주소를 이용한 통신 수행
* 전송단위 : 프레임
* 브리지, 스위치 등

<br>

### 3계층. 네트워크 계층
* 데이터를 목적지 네트워크까지 보낼 경로 탐색 및 전송(라우팅) 기능 담당
* IP 주소를 이용한 통신 수행
* 전송단위 : 패킷
* 라우터 등

<br>

### 4계층. 전송 계층
* 양 끝단 송.수신자(소켓) 간에 신뢰성있는 데이터를 주고받을 수 있는 통신 환경 구축 및 유지
   * 상위 계층(5,6,7 계층) 들이 데이터 전달의 유효성이나 효율성을 신경쓰지 않게 해줌 
* 네트워크 계층 통신에서의 오류 검출 및 복구, 흐름제어, 중복검사등의 기능 수행
* Port 번호를 이용한 통신 수행
* 전송단위 : 세그먼트
* TCP, UDP 등

<br>

### 5계층. 세션 계층
* 데이터 통신을 위한 논리적인 연결(가상연결)인 세션의 관리(생성,유지,복구...) 기능 담당
* 응용 프로세스가 통신을 관리 할 수 있는 기능 제공

<br>

### 6계층. 표현 계층
* 데이터 송신시, 응용계층으로부터 받은 데이터를 세션 계층에 보내기전, 통신에 적절한 형태로 변환
* 데이터 수신시, 세션 계층에서 받은 데이터를 응용계층이 인식할 수 있는 형태로 변환
* MIME 인코딩, 데이터 암호화, 데이터 압축 등의 기능 수행

<br>

### 7계층. 응용 계층
* 사람이 사용하는 애플리케이션, 응용 서비스

<br>

# 인캡슐레이션, 디캡슐레이션
### 인캡슐레이션
* 애플리케이션에 사용자가 입력한 데이터를 OSI 7 계층을 거쳐 상대방에게 네트워크를 통해 전송하는 과정

### 인캡슐레이션 과정
1. 7 계층 : 사용자가 애플리케이션에 데이터 입력 후 네트워크 전송 요청
2. 6 계층 : 7 계층으로부터 전달된 사용자의 데이터를 목적지 pc 가 인식할 수 있도록 표준화된 형식으로 인코딩, 필요한 경우 암호화
	> 헤더에 인코딩 타입 정보와, 암호화 해독에 필요한 정보등을 저장
3. 5 계층 : 목적지 pc 와 연결된 통신(세션)의 생성, 유지, 종료 등의 관리수행
4. 4계층 : 목적지 pc 의 어느 어플리케이션에게 데이터를 전송할지 알려주는 TCP 포트 번호 정보 헤더에 추가
5. 3계층 : 목적지 pc의 IP 주소를 이용해 목적지 pc가 속해있는 네트워크(출발지 라우터 > AS > AS > 목적지 라우터)까지 전송할 가장 최적의 경로 탐색하여 헤더에 추가
	> IP 주소의 네트워크부를 통해 IP 주소가 속해있는 네트워크의 공인IP 확인 가능
6. 2계층 : 목적지 PC 의 네트워크에 도착 후, 목적지 PC 까지 찾아가는데 필요한 목적지 PC MAC 주소 정보를 헤더에 추가
7. 1계층 : 1계층까지 내려온 데이터를 전기신호로 변환하여 케이블에 실어 전송

<br>

### 디캡슐레이션
* 목적지 pc 가 데이터 수신후, 애플리케이션까지 데이터를 전달하는 과정

### 디캡슐레이션 과정
1. 1계층 : 전기적 신호 데이터 수신
2. 2계층 : 헤더에 저장되어있는 MAC 주소를 읽어 자신의 MAC 주소와 일치하는지 확인
3. 3계층 : 헤더에 저장되어있는 IP 주소를 읽어 자신의 IP 주소와 일치하는지 확인
4. 4계층 : 헤더에 저장되어있는 TCP 포트로 데이터 전송(랜카드 > PC)
	> TCP 포트에 연결되어있는 프로세스에게 데이터 전송됨
5. 5계층 : 세션관리
6. 6계층 : 헤더에 저장되어있는 인코딩, 암호화 정보등을 확인해 복호화, 디코딩 수행
7. 7계층 : 애플리케이션에서 수신한 데이터 처리