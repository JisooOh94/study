# 라우팅
* 데이터 프레임을 목적지 pc 가 속해있는 네트워크까지 보내는 최적의 경로 탐색 및 전송

<br>

# 라우팅 프로토콜, 라우티드 프로토콜
### 라우팅 프로토콜
* 탐색된 최적의 경로로 데이터 프레임을 전송해주는 프로토콜
* 목적지에 도달하기까지 거쳐가는 라우터, 네트워크와 라우팅 프로토콜로 통신
* 라우터 제조사 및 종류마다 사용하는 라우팅 프로토콜이 다름(RIP, IGRP...)

### 라우티드 프로토콜
* 라우팅 프로콜에 의해 전송되는 데이터 프레임의 통신 프로토콜(TCP/IP, FTP 등...)
* 목적지까지 네트워크까지는 라우팅 프로토콜을 통해 전송되고 목적지 네트워크의 라우터에서 목적지 PC 까지는 라우티드 프로토콜을 통해 전송됨 

<br>

# 라우팅 경로 탐색 방법
* 라우터마다 가지고 있는 라우팅 테이블에 각 네트워크로 가는 최적의 경로 저장해둠

### 라우팅 테이블
* 다른 네트워크로 가는 최적의 경로 저장 테이블
* PC 시작시, 자동으로 다른(모든) 네트워크로 가는 최적의 경로 탐색 및 라우팅테이블에 저장
* 저장되어있는 최적의 경로가 끊어졌을때를 대비하여 주기적으로 최적의 경로 재탐색하여 라우팅테이블 업데이트
* 라우팅 테이블은 Ram 에 저장되기 떄문에 pc 종료시 지워짐

<br>

# 라우팅 프로토콜 종류
### 스태틱 라우팅 프로토콜
* 사람이 직접 다른 네트워크로 가는 최적의 경로 조사하여 라우팅 테이블에 저장하는것
* 라우터의 경로탐색 작업이 없으므로, 라우터에 부하가 거의 없어 라우팅 속도 빠름
* 사람이 직접 경로탐색을 해야한다는 번거로움과, 기존 최적의 경로가 끊어져도 (사람이 끊어진것을 찾아내기전까지)대응이 불가능하다는 단점 존재 

### 다이나믹 라우팅 프로토콜
* 라우터가 직접 최적의 경로를 탐색하여 라우팅 테이블에 저장하는것
* 주기적으로 라우팅 테이블 경로 update 하므로 기존 최적의 경로가 끊어져도 자동으로 수정됨
* 경로 탐색 작업으로 인해 라우터에 부하가 가므로 라우팅 속도 저하

<br>

# Autonomous System
* 하나의 네트워크 관리자에 의해 관리되는 라우터(네트워크)들의 집합
* 즉, 라우터들로 나뉘어진 네트워크들을 묶는 하나의 네트워크 그룹
* Autonomous System(네트워크 그룹) 엔 다른 Autonomous System 과 통신하기 위한 하나의 문지기 라우터 존재

### 내부용 라우팅 프로토콜(IGP : Interior Gateway Protocol)
* AS 에 속해있는 라우터들은 같은 AS에 속해있는 네트워크로 가는 경로들만 알고있으면 됨
	> 따라서 PC 시작시, 같은 AS 에 속해있는 네트워크들로 가는 최적의 경로들만 라우팅 테이블에 저장
* AS 내부(같은 AS에 속해있는 네트워크들간의) 라우팅시 사용되는 라우팅 프로토콜을 IGP 라 함   

### 외부용 라우팅 프로토콜(Exterior Gateway Protocol)
* 목적지 네트워크가 다른 AS에 속해있는 경우 문지기 라우터를 통한 AS 간 라우팅 필요
* 문지기 라우터는 라우팅테이블에 다른 AS 로 가는 최적의 경로 저장
* AS 간 라우팅 시 사용되는 라우팅 프로토콜을 EGP 라 함

<br>

# 다이나믹 라우팅 프로토콜 종류
### 디스턴스 벡터
* 현재 네트워크에서 목적지 네트워크까지 가는 거리(홉 수)와 방향(목적지 네트워크까지 연결되는 인접 라우터)만 라우팅 테이블에 저장
   > 목적지 네트워크 까지 가는 전체 경로 저장 x
* 네트워크 연결에 변화가 생겨 라우팅 테이블 정보를 수정(거리정보나 방향 변경)해야할 경우, 인접 라우터의 라우팅 테이블과 비교하여 업데이트
* 목적지 네트워크까지 가는 전체 경로를 저장하지 않기 때문에, 목적지 네트워크까지의 경로가 변경된것을 바로 인식할 수 없음
   > 따라서 네트워크 내의 모든 라우터들이 주기적으로 라우팅 테이블 교환
* 장점
   * 라우팅 테이블에 전체 경로 정보를 저장하지 않으므로 메모리 절약 가능
* 단점
   * 주기적으로 라우팅 테이블을 교환하므로 네트워크에 변화가 없어도 교환이 수행되어 트래픽 낭비가 발생
   * 네트워크 내의 전체 라우터간의 라우팅 테이블 교환이 수행되므로, 네트워크에 변화가 생겼을때, Convergence Time 이 오래걸림
   > Convergence Time : 네트워크 변화를 네트워크내 모든 라우터의 라우팅테이블에 반영하는데 걸리는 시간
   * 라우팅 테이블의 느린 업데이트 속도로 인해 라우팅 테이블에 저장될수 있는 네트워크의 최대거리(최대 홉수)에 제한이 있음
   > IGP 의 경우 최대 홉수 15개 제한이 있음 - 현재 네트워크로부터 최대 15개 라우터 건너에 있는 네트워크는 인식 할 수 없음
* 메모리가 작고, 속해있는 라우터의 수가 적은 네트워크에 적합

### 링크 스테이트
* 일반적으로 알고있는, 목적지까지의 전체 경로를 라우팅 테이블에 저장하는 다이나믹 라우팅 방식
* 장점
   * 라우팅 테이블에 전체 경로를 저장하므로 네트워크에 변화 발생해 중간에 링크가 깨지면, 인지하는 시간도 빠르고 라우팅테이블에 반영하는 속도도 빠름
      > 다른 모든 네트워크와의 라우팅테이블 교환 없이 자신의 라우팅 테이블만 자신이 직접 경로 탐색하여 수정하므로 
* 단점
   * 라우팅 테이블에 전체 경로를 저장하므로 메모리 많이 소모
   * 라우터에서 토폴러지 데이터베이스 생성, SPF 계산 등 수행하는 작업이 많아 부하가 많이 감

### 링크 스테이트의 라우팅 테이블 최단 경로 저장 과정
1. 링크정보(어느 위치에 어떤 네트워크가 존재하고, 그 네트워크까지 갈 수 있는 모든경로 정보) 를 토폴로지 데이터베이스로 저장
2. SPF 알고리즘을 통해 토폴로지 데이터베이스의 링크정보를 SPF 트리로 생성
   * SPF 알고리즘 : 각 네트워크로 가는 최단 경로 계산 알고리즘
   * SPF 트리 : 현재 네트워크를 root 로 AS 내의 다른 모든 네트워크들로 가는 최단 경로들을 트리로 나타낸것 
3. SPF 트리를 바탕으로 라우팅 테이블 저장