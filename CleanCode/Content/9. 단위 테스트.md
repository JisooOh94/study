# 단위 테스트
* 단위테스트를 통해 코드 수정시 발생하는 버그를 잡아낼 수 있어 코드 수정이 쉬워짐
* 그를통해 코드의 유연성, 유지보수성, 재사용성을 높힐 수 있음
## TDD
* 테스트 코드를 먼저 작성하고, 후에 실제 코드를 작성하는 개발방법
### TDD 세가지 법칙
1. 실패하는 테스트 코드를 작성할때까지 실제 코드는 작성하지 않는다
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 테스트 코드를 작성한다
3. 현재 실패하는 테스트 코드를 통과할 정도로만 실제 코드를 작성한다.
* 하지만 위 세가지 규칙을 모두 철저히 지키면 테스트 코드의 양이 너무 방대해지므로 유동적으로 적용
### 가독성
* 테스트 코드 작성시에 가장 중요한 요소는 가독성
* 기존에 작성해둔 테스트 코드가 더러울경우, 실제 코드가 변경되어 테스트 코드를 수정할때, 수정이 어려워짐
* 그에따라 테스트코드 유지보수비용이 실제 코드 개발보다 더 커지게 되어 개발자들에게 큰 짐이 되므로 가독성 좋고 수정하기에 좋도록 테스트 코드 작성이 중요
* Build-Operation-Check(given-when-then) 패턴을 통해 테스트코드에서 불필요한 내용들을 제거하고 가독성을 높힐 수 있음
* 테스트 코드는 속도나 메모리사용량등의 효율성을 신경쓰지 않아도 되므로 그들을 포기하면서 가독성을 더욱 향상
```java
//효율성은 높으나 가독성이 떨어짐
public String getState() {
   StringBuffer sb = new StringBuffer(); 
   if(heater) {
	   sb.append("H"); 
   } else {
	   sb.append("h");
   }
   if(blower) {
	   sb.append("B"); 
   } else {
	   sb.append("b");
   }
   return sb.toString();
}

//효율성은 떨어지나 가독성이 높음
public String getState() {
  String state = "";
  state += heater ? "H" : "h"; 
  state += blower ? "B" : "b"; 
  return state;
}
```
### 좋은 테스트코드를 작성하기 위한 규칙
1. 하나의 테스트함수내의 Assert문은 최소로 줄인다.
2. 테스트함수 하나는 개념 하나만 테스트하라
```java
@Test
public void groupList() {
		WasteListParam param = new WasteListParam();
		param.setGroupId("@12345");
		long count = 10;
		List<RecycleFile> recycleFileList = new ArrayList<>();
		when(wasteBO.getRecycleFileList(user, param)).thenReturn(recycleFileList);

		GroupFolder groupFolder = new GroupFolder();
		groupFolder.setShareNo(12345L);
		when(groupBO.getGroupFolderInfo(user, param.getGroupId())).thenReturn(groupFolder);

		Recycle recycle = new Recycle();
		recycle.setCount(count);
		when(wasteBO.getRecycleCountInfo(user.getUserId(), user.getUserId())).thenReturn(recycle);

		ListResult<? extends WasteInfo> result = controller.list(user, param);

		Assert.assertEquals(count, result.getTotalCount());
}

@Test
public void groupListWhenGroupFolderIsNull() {
		WasteListParam param = new WasteListParam();
		param.setGroupId("@12345");
		long count = 10;
		List<RecycleFile> recycleFileList = new ArrayList<>();
		when(wasteBO.getRecycleFileList(user, param)).thenReturn(recycleFileList);

		when(groupBO.getGroupFolderInfo(user, param.getGroupId())).thenReturn(null);

		ListResult<? extends WasteInfo> result = controller.list(user, param);

		Assert.assertTrue(result.getList().isEmpty());
}
```
3. FIRST 규칙을 준수해라

### FIRST 규칙
* Fast(빠르게)
* Independent(독립적으로)
* Repeatable(반복가능하게)
* Self-Validating(자가검증하는)
* Timely(적시에)
* 
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTI1NDE1MzMwNiwtMTEyNTQyMTM5NF19
-->