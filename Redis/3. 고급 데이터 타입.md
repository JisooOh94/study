# 셋(SET)
### 특징
* 순서가 없고, 동일한 문자열이 없는 콜렉션
* Set의 모든 Element 값이 Integer인 경우, Set 메모리 영역은 줄어든다.
* 전체 Element 갯수는 set-max-intset-entries 설정 만큼 커질 수 있다.
* 최대 Element 갯수 : 232-1
* 사용예 - 데이터의 필터링, 그룹핑 등

### 커맨드
* SADD key value1 value2 ... : key에 해당하는 Set에 value 값을 저장한다. Set에 이미 존재하는 element를 추가하는 경우, 무시하고 추가된 엘리먼트 갯수를 리턴한다.
```
127.0.0.1:6379> SADD user:max:favorite_artists "Max" "Bravo"
(integer) 2
127.0.0.1:6379> SADD user:hugo:favorite_artists "Max" "Punk" "Kooks"
(integer) 3
```

* SINTER key1 key2 ... : 하나 이상의 Set을 받아, 모든 Set에 공통으로 존재하는 Element를 배열로 리턴한다 (교집합)
```
127.0.0.1:6379> SINTER user:max:favorite_artists user:hugo:favorite_artists
1) "Max"
```

* SDIFF key1 key2 ... : 하나 이상의 Set을 받아, key1 Set에 해당되는 모든 Element 중 다른 Set(key2 ...)에 존재하지 않는 Element를 반환한다. (차집합)
```
127.0.0.1:6379> SDIFF user:max:favorite_artists user:hugo:favorite_artists
1) "Bravo"
 
127.0.0.1:6379> SDIFF user:hugo:favorite_artists user:max:favorite_artists
1) "Punk"
2) "Kooks"
```

* SUNION key1 key2 ... : 하나 이상의 Set을 받아, 모든 Set의 모든 Element를 하나의 배열로 모아 리턴한다. 결과에 중복된 Element는 존재하지 않는다. (합집합)
```
 127.0.0.1:6379> SUNION user:max:favorite_artists user:hugo:favorite_artists1) "Max"2) "Bravo"3) "Punk"
4) "Kooks"
```

* SRANDMEMBER key : key에 해당하는 set에서 무작위로 하나의 element를 뽑는다.
```
 127.0.0.1:6379> SRANDMEMBER user:max:favorite_artists
1) "Max"
 
 127.0.0.1:6379> SRANDMEMBER user:max:favorite_artists
1) "Bravo"
```

* SISMEMBER key value : key에 해당하는 set에서 value에 해당하는 element가 존재하는지 확인한다. 있으면 1, 없으면 0을 리턴한다.
```
 127.0.0.1:6379> SISMEMBER user:max:favorite_artists "MAX"(integer) 1
```

* SREM key value1 value2... : key에 해당하는 set에서 입력받은 value에 해당하는 모든 element를 삭제한다. 삭제된 element의 수만큼 값을 리턴한다.
```
 127.0.0.1:6379> SREM user:hugo:favorite_artists "Punk" "Kooks"
(integer) 2
```

* SMEMBERS key : key에 해당하는 set의 모든 element를 배열로 리턴한다.
```
 127.0.0.1:6379> SMEMBERS user:max:favorite_artists1) "Max"2) "Bravo"
```

# 정렬된 셋(Sorted SET)
### 특징
* 정렬된 셋의 모든 Element는 연관 점수를 가진다. 이 점수에 의해서 정렬된, 중복 문자열이 없는 콜렉션이다.
* 동일한 연관 점수를 가진 Element인 경우, 사전 편집 순서(알파벳 수선소)대로 정렬할 수 있다.
* 점수로 Element를 검색하기 때문에 기본적으로 Set보다는 빠르지 않다.
* 내부 구현은 2개의 분리된 데이터 구조로 되어있다
    * zset-max-ziplist-entries와 zset-max-ziplist-value 설정을 기반으로 하는 Ziplist
    * 해시 데이블이 존재하는 Skiplist
### 커맨드
* ZADD key score1 value1 score2 value2 ... : key에 해당하는 정렬된 set에 score와 value로 이루어진 element를 저장한다. 
```
 127.0.0.1:6379> ZADD leaders 100 "A" 101 "B"
(integer) 2
 127.0.0.1:6379> ZADD leaders 101 "C" 102 "D" 103 "E"
(integer) 3
```

* ZREVRANGE key start_idx end_idx
    * key에 해당하는 정렬된 set을 score 기반으로 start_idx 부터 end_idx에 해당되는 element 배열을 리턴받는다. (end_idx에 음수를 주면 끝 element부터 카운트 된다. -1이면 제일 마지막 element를 의미)
    * ZREVRANGE는 score 기준 내림차순으로 리턴한다. (10 → 1). 동일 score의 경우 알파벳순 내림차순으로 정렬한다 (Z → A)
    * ZRANGE는 ZREVRANGE와 반대되는 커맨드.
    * 만약, score를 보고 싶은 경우에는 WITHSCORES 키워드를 사용해 각 element의 score도 확인이 가능하다. 
```
 127.0.0.1:6379> ZREVRANGE leaders 0 -1
1) "E"
2) "D"
3) "C"
4) "B"
5) "A"
 
 127.0.0.1:6379> ZREVRANGE leaders 0 -1 WITHSCORES
 1) "E"
 2) "103"
 3) "D"
 4) "102"
 5) "C"
 6) "101"
 7) "B"
 8) "101"
 9) "A"
10) "100"
```

* ZREM key value1 value2 ... : key에 해당하는 정렬된 set에 value에 해당되는 element를 삭제 한다. 삭제된 element수만큼 값을 리턴한다.
```
 127.0.0.1:6379> ZREM leaders "A" "B" "F"
(integer) 2
```

* [ZSCORE | ZRANK | ZREVRANK] key value
    * ZSCORE : key에 해당되는 정렬된 set에서 value에 해당되는 element의 score를 가져온다.
    * ZRANK : key에 해당되는 정렬된 set에서 value에 해당되는 element의 순위를 가져온다 (score 오름차순 정렬)
    * ZREVRANK : key에 해당되는 정렬된 set에서 value에 해당되는 element의 순위를 가져온다 (score 내림차순 정렬)
```
 127.0.0.1:6379> ZREVRANGE leaders 0 -1 WITHSCORES
1) "E"
2) "103"
3) "D"
4) "102"
5) "C"
6) "101"
 127.0.0.1:6379> ZSCORE leaders "E"
"103"
 127.0.0.1:6379> ZRANK leaders "E"
(integer) 2
 127.0.0.1:6379> ZREVRANK leaders "E"
(integer) 0
```