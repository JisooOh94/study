# Http 메시지 방향
* 인바운드 : 클라이언트 -> 서버 방향 전송
* 아웃바운드 : 서버 -> 클라이언트 방향 전송
* Http 메세지는 다운스트림으로 프락시를 흘러 전송

<br>

# Http 메서드 종류
| 메서드 | 기능 | 바디 포함 |
|:------|:-----|:--------:|
|GET|서버에 리소스 요청|X|
|HEAD|리소스 요청에 대한 서버 응답메시지의 헤더만을 요청|X|
|POST|서버에 리소스를 보내며 처리 요청|O|
|PUT|서버에 리소스를 보내며 처리 요청|O|
|TRACE|요청메시지가 프락시를 거쳐 서버에 도달하는 과정 추적|X|
|DELETE|서버에 리소스 제거 요청|x|
|OPTIONS|서버에게 특정리소스에 대해 수행할 수 있는 메소드 목록 요청|
|확장메서드|사용자 정의한 메서드|?|\

### Put - Post 차이
* 리소스를 서버에 저장하는것은 동일
* Post의 경우 save 개념이고 Put의 경우 update 개념
* 동일한 리소스를 동일한 경로로 여러번 post로 전송할 경우, 여러개의 동일한 파일 생성
* 동일한 리소스를 동일한 경로로 여러번 put으로 전송할 경우, 하나의 파일만 생성 후 계속 update

### HEAD 메서드 용도
   * 헤더 정보를 통해 빠르게 리소스에 대한 정보 파악 가능(Context-Type 등..)
   * 응답 상태 코드를 통해 리소스가 서버에 존재하는지 확인 가능

### TRACE
* 요청에 실패했을 경우 어디서 오류가 발생했는지 디버깅 가능
* 클라이언트의 요청이 원서버에 도달할때까지 거쳐간 프락시/게이트웨이 경로와 각 프락시에서 수행한 작업들에 대한 추적
* 중계 서버들이 전달된 요청메시지에 대해 수행한 작업 기록
* 중계서버들을 거쳐 원서버에서 요청메시지 수선시, 원서버는 전달받은 요청메시지를 응답메시지 본문에 저장하여 클라이언트에게 전송
* via 헤더
	* 요청이 거쳐간 중계 서버(프락시/게이트웨이)들의 경로 기록
	* 요청이 중계서버에 도달했을 때, 중계서버는 자신에 대한 정보를 via 헤더 필드 뒤에 추가 ( , 로 구분)
	```java
	via: 1.1 test-drive-ems01.ncl, FTP/1.0 test-drive-ftp.ncl:8009
	```
	* 포맷 : 프로토콜 종류 / 프로토콜 버전 / 호스트 명 및 포트번호 / 코멘트
1. **프로토콜 종류**
	* 중계서버에 전달된 요청메시지의 프로토콜
	* http 일 경우 생략
2. **프로토콜 버전**
   * 중계서버에 전달된 요청메시지 프로토콜 버전
3. **호스트 명 및 포트번호**
   * 중계서버 호스트 명 및 포트번호
   * 포트번호가 80일경우 생략 가능
4. **코멘트**
   * 중계 서버에 대한 추가적인 설명
   * 생략 가능

### OPTIONS
   * 지정한 uri에 대해 웹서버가 지원하는 Http 메서드 종류를 요청하는 메서드
   * 응답메시지 Allow 헤더에 요청메시지에서 명시한 uri 에 대해 지원하는 Http 메서드 종류 명시
   * 리소스를 직접 요청하지 않고도 그 리소스에 접근하기 위한 최적의 메소드가 무엇인지 파악 가능
      ```
      <요청 메시지>
      요청줄 : OPTIONS /root/index.html HTTP/1.1
      <응답 메시지>
      응답 헤더 : Allow : GET, POST, DELETE
      ```   
   * uri가 * 일경우 모든 uri에 대해 서버가 지원하는 모든 Http 메서드 종류 응답
   * 요청 메시지에 Allow 헤더가 있는경우, 클라이언트에서 서버에게 명시한 uri에 대해서 허용해주길 바라는 메서드를 명시한 것. ( 서버가 반드시 들어줄 필요는 x)
   
<br>

# Http 응답 상태 코드 종류
| 코드 | 범위 | 의미 | 설명 |
|:---:|:-----:|:-----|:---|
|2xx|200-206|성공|요청 처리 성공|
|3xx|300-305|리다이렉션|요청한 리소스가 다른경로로 옮겨짐|
|4xx|400-415|클라이언트 에러|클라이언트 요청 메시지에 에러 |
|5xx|500-505|서버 에러|요청 처리 과정에서 서버에 에러 발생|

### 200번대 상태코드
| 코드 |사유구절| 설명 |
|:---:|:------:|:---|
|200|OK|요청 처리 성공|
|201|Created|Post, Put등의 메소드로 요청을 했을경우 리소스가 정상적으로 저장되었음을 알림, 응답메시지 헤더에 생성된 리소스에 대한 참조(경로)정보와 접근 url을 포함함|
|202|Accepted|서버에서 요청은 받아들였으나 아직 처리하진 않은 상태, 요청메시지가 정상이라는것만 판단한 상태|
|204|No Content|바디가 없는 응답메시지|
|205|Reset Content|서버에서 브라우저에게 현재페이지 clear명령 전달|
|206|Partial Content|클라이언트의 리소스 부분요청 처리 성공|

### 300번대 상태코드
* 클라이언트가 요청한 리소스가 다른 경로로 옮겨졌을 경우, 300번대 응답코드와 함께 옮겨진 리소스 url을 함께 보냄으로서 브라우저가 자동으로 해당 url로 재 요청

| 코드 |사유구절| 설명 |
|:---:|:------:|:---|
|300|Multiple Choices|요청 url이 여러 리소스를 가리킬경우, 가리키는 리소스 목록 반환|
|301|Moved Permanently|요청한 리소스가 다른 url로 영구적으로 옮겨졌을경우, 클라이언트에게 옮겨진 url과 함께 영구적으로 옮겨졌음을 알림|
|302|Found|요청한 리소스가 다른 url로 일시적으로 옮겨졌을경우, 클라이언트에게 옮겨진 url과 함께 일시적으로 옮겨진거니 다음 요청때도 원본 url로 요청해야함을 알림|
|303|See Other|요청한 리소스가 다른 url로 옮겨졌으니, 옮겨진 url을 GET 메소드로 요청해야한다고 구체적으로 알림|
|304|Not Modified|로컬 캐시의 Freshness 판단 요청에 대한 응답코드|
|305|Use Proxy|요청 리소스가 반드시 프락시 서버를 통해 요청해야함을 프락시 서버 주소와 함께 알림|
|307|Temporary Redirect|302와 동일, Http 1.0/1.1 버전간 호환을 위한 응답 코드|

### 400번대 상태코드
| 코드 |사유구절| 설명 |
|:---:|:------:|:---|
|400|Bad Request|잘못된 요청임을 알림|
|401|Unauthorized|접근권한이 제한된 리소스에 대한 요청시, 클라이언트에게 인증요구|
|403|Forbidden|요청이 서버에 의해 거부되었음을 알림|
|404|Not Found|존재하지 않는 리소스에 대한 요청임을 알림|
|405|Method Not Allowed|리소스에 대해 지원하지 않는 메소드로 요청했을 경우, 지원하는 메소드 목록과 함께 반환|
|406|Not Acceptable|클라이언트가 요청한 리소스가 클라이언트의 Accep타입이 아닌경우|
|407|Proxy Authentication Required|클라이언트가 리소스를 요청한 프록시 서버에 대해 인증이 필요한 경우|
|408|Request Timeout|클라이언트의 요청을 처리하는뎅 너무 오래걸리는경우, 반환후 TCP 커넥션 종료|
|409|Conflict|클라이언트의 요청이 서버 리소스에 충돌을 일으킬 수 있을경우|
|410|Gone|삭제된 리소스에 대한 요청시|
|411|Length Required|클라이언트의 요청을 처리하기 위해 Content-Length 정보가 필요한 경우|
|412|Precondition Failed|클라이언트의 조건부 요청 처리 중 한 조건을 만족하지 않는 경우|
|413|Request Entity Too Large|서버가 처리할 수 있는 크기의 한계를 넘은 요청을 하는 경우|
|414|Request URI Too Long|서버가 처리할 수 있는 길이의 한계를 넘은 요청 url로 요청을 하는 경우|
|415|Unsupported Media Type|서버가 지원하지 않는 포맷의 Content-Type으로 요청을 하는 경우|
|416|Requested Range Not Satisfiable|리소스 부분 요청시, 지정한 요청 범위가 잘못된 경우|

### 500번대 상태코드
| 코드 |사유구절| 설명 |
|:---:|:------:|:---|
|500|Internal Server Error|요청 처리 중 서버에 에러 발생|
|501|Not Implemented|서버가 처리할 수 없는 요청을 하는경우(e.g. 지원하지 않는 메서드로 요청)|
|503|Service Unavailable|현재는 처리 할 수 없지만(해당리소스가 다른프로세스에서 사용중인경우) 나중에는 처리 가능한 요청일 시|
|504|Gateway Timeout||
|505|Http Version Not Supported|서버가 지원하지 않는 Http 프로토콜 버전으로 요청하는 경우|

<br>

# Http 헤더에 사용되는 파라미터 종류
| 헤더 | 예 | 내용 |
|:----:|:---|:----|
|일반헤더|Date=Tue,3 Oct 1974|요청,응답 메시지 구분 없이 모두 사용될 수 있는 파라미터|
|요청헤더|Accept=application/json|서버에 요청시 요청에 대한 부가정보 제공|
|응답헤더|Server=Tiki-Hut/1.0|클라이언트가 서버로부터 전송되는 리소스를 받기위한 부가정보 제공|
|Entity헤더|Content-Type=text/html|Body에 담겨져있는 데이터에 대한 정보 제공|
|확장헤더|?|개발되었지만 표준 HTTP 명세에는 추가되지 않은 비표준 헤더|
<!--stackedit_data:
eyJoaXN0b3J5IjpbMjAwMjQyMzYwMV19
-->