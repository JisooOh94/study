# **HTTPS 개요**
- HTTP 메세지를 암호화 하여 전송
- TCP/IP 4계층의 애플리케이션 계층 아래에 암호화계층(SSL:Secure Sockets Layer) 추가

![image](https://user-images.githubusercontent.com/48702893/91661339-5f5d9d80-eb16-11ea-9e37-a8b6d9348986.png)

- 암호화 알고리즘 + 암호화 키 를 통해 메시지 암호화
- 좋은 암호화 알고리즘 : 암호화 알고리즘 해킹방법이 열거공격(가능한 모든 경우의 수 시도)밖에 없는 알고리즘

```
CyptedMessage = encoding(cyptKey, message)
```

- 암호화 알고리즘은 대부분 공개되어있어, 암호화 키가 노출되지 않는것이 중요

<br>

# **키에 따른 암호화 방식**
### 대칭키 암호법
- 웹서버와 클라이언트가 서로 주고받는 메시지를 암호화,복호화 하기위해 사용하는 비밀키
* 장점
	* 암호화/복호화 속도 빠름
* 단점
	* 서버가 자신과 HTTS 프로토콜로 통신하는 모든 클라이언트와의 비밀키를 저장, 관리해야함

### 공개키 암호법
- 공개키로 메시지 암호화, 개인키로 암호화된 메시지 복호화
- 웹서버와 통신하고자 하는 모든 클라이언트는 공갴키를 통해 메시지 암호화 하여 전송
* 웹서버가 자신만이 보유하고있는 (공개키에 대응되는)개인키를 통해 암호화된 메시지 복호화
- 메시지 인코딩은 모두(클라이언트)가 가능하나, 메시지 디코딩은 소유자(웹서버)에게만 부여
- 대표적으로 RSA 알고리즘
* 장점
	* 웹서버가 공개키, 개인키만 관리하면됨
* 단점
	* 암호화/복호화 속도 느림

### 혼성 암호 체계
- SSL 작동 방식
- 인코딩, 디코딩에 오래걸리는 공개키 암호법과 관리해야하는 키의 수가 많아지는 대칭키 암호법의 단점을 보완한 암호법
- 최초 커넥션 수립시 편리한 공개키 암호법을 사용, 수립한 커넥션으로 임의의 대칭키를 생성하여 교환, 인코딩/디코딩 속도가 빠른 대칭키 암호법으로 데이터 통신 후 커넥션 종료시 대칭키 삭제

<br>

# **디지털 서명**
- 클라이언트 요청 메시지가 중간에 인터셉트 당하여 위조되었는지 확인, 메시지를 전송한 클라이언트가 본인이 맞는지를 확인하는 기술
- 클라이언트 개인키 + 공개키 + 서명함수 이용
- 클라이언트에서 요청메시지 전송시, 요청메시지에 자신의 서명을 포함하여 전송
- 서명 생성
   1. 전송할 요청메시지를 설정된 길이로 요약
   2. 요약본을 클라이언트 개인키와 서명함수를 통해 암호화하여 서명으로 변환
   3. 변환한 서명을 요청 메시지에 포함시켜 전송
- 서명 검증
   1. 공개키와 서명함수 역함수를 이용하여 클라이언트 서명 복호화
   2. 서명을 복호화 하여 풀어낸 요청메시지 요약문과 실제 전송받은 요청메시지 요약문 비교
   3. 일치하지 않을경우, 메시지가 중간에서 위조됨 / 클라이언트가 공개키에 대응되는 개인키를 보유하지 않음(클라이언트 위장)

<br>

# **디지털 인증서**
- 클라이언트가 서버와 Https로 통신시, 서버의 공개키 및 키 알고리즘을 받아오는 방법

### 포함 정보
1. 서버 이름, 호스트 명
2. 서버 공개키, 키 알고리즘
3. 인증서 기관 이름
4. 인증서 서명, 서명 알고리즘

### 디지털 인증서를 이용한 클라이언트 - 서버 통신 과정
1. 클라이언트는 웹서버와 커넥션 수립 후, 웹서버로부터 디지털 인증서 수신
2. 디지털 인증서에서 얻은 인증서 서명 및 서명알고리즘과 클라이언트에 저장되어있는 인증서 인증기관의 공개키를 통해 인증서 검증
   - 웹브라우저 설치시 유명한 디지털 인증서 인증기관들의 공개키도 함께 설치됨
   - 디지털인증서에서 인증서 기관이름을 읽어와 그에 해당하는 공개키 탐색
   - 찾아낸 공개키와 서명 알고리즘을 이용하여 인증서 서명을 복호화
   - 복호화한 결과물인 인증서 내용 요약문과 실제 수신한 인증서 내용을 직접 요약한 결과가 서로 같은지 확인하여 인증서 검증
3. 인증서 검증 통과 후 인증서에 저장되어있는 서버 공개키와 키 알고리즘으로 요청 메시지를 암호화하여 전송

# Cipher Suite
- 암호화 스위트
- 어떤 프로토콜과 어떤 암호화 알고리즘, 어떤 키종류를 사용하여 메시지를 암호화하여 통신할것인지에 대한 정보

### Cipher Suite 구조 
![image](https://user-images.githubusercontent.com/48702893/91661670-7dc49880-eb18-11ea-86db-0643db0e7e3b.png)