# Young Generation 영역 구조
### Eden
* 객체 생성후 처음 저장하는 공간
* 이 공간이 가득차면 minor GC 가 수행되며 GC 후 살아있는 객체들이 Survivor 영역으로 이동됨

### Survivor
* minorGC 이후 살아남은 객체들이 저장되는 공간
* 2개의 Survivor 공간으로 구성되며 어느 한쪽에 객체가 저장되어있을땐(FromSpace) 다른 한쪽(ToSpace)은 반드시 비어있어야 함
* 일정 나이 이상이된 객체들은 minorGC 시, Survivor 영역에서 Old Generation 영역으로 이동됨

![image](https://user-images.githubusercontent.com/48702893/84272026-dadb2e80-ab67-11ea-8e4a-e02591940371.png)


# Minor GC 과정
### 1. minorGC Triggered
* 새로 생성되는 객체들은 모두 Eden 영역에 저장
* Eden 영역이 가득차면 minorGC 수행

![image](https://user-images.githubusercontent.com/48702893/84272408-54731c80-ab68-11ea-9d67-61c50da8addd.png)

### 2. Marking
* Eden 영역과 FromSpace 에 저장되어있는 객체들중 참조가 유지되고 있는 객체들을 마킹

### 3. Copy & Clear
* 마킹된 객체들을 ToSpace 로 복사 후 Eden 영역과 FromSpace Clear

### 4. Old Gen
* 위의 1-3 의 과정을 반복할떄마다 Survivor 영역에 저장되어있는 객체들의 나이(통과한 GC 횟수)는 1씩 증가
* MaxTenuringThreshold 값으로 설정한 나이 이상이 된 객체들은 minorGC 시, ToSpace 가 아닌, Old Generation 영역으로 이동됨
* 객체의 나이가 MaxTenuringThreshold 값보다 작아도 Survivor 영역이 모두 가득차면 Old Generation 영역으로 Promotion

# Minor GC 관련 JVM 옵션
### MaxTenuringThreshold
* Young Generation 영역에서 Old Generation 영역으로 이동되는 객체 나이 Threshold
* 가능한 범위 : 0 ~ 15 (Java 8 기준 default : 15)

### SurvivorRatio
* 전체 Young Generation Heap 공간 중 Eden 영역과 Survivor 영역의 비율 설정
* SurvivorRatio = Eden 영역 크기 / (Survivor 영역 크기 / 2)
* Survivor 영역의 크기가 너무 작을 경우, 임계값이 되지 않았음에도 Old Generation 영역으로 Promotion 되는 객체들이 많아짐
* Eden 영역의 크기가 너무 작을 경우, minorGC 가 너무 자주 발생
* Java 8 기준 default : 8

### NewRatio
* 전체 Heap 메모리 공간 중, Young Generation 영역과 Old Generation 영역의 비율 설정
* NewRation = Old Gen 크기 / Young Gen 크기
* 일반적으로 서버 어플리케이션은 1:2, 클라이언트 어플리켄이션은 1:3~5로 설정(Java8 기준 default : 2)

